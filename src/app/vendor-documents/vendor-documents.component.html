<div class="heading">
    <mat-icon>attachment</mat-icon>
    <h4>Vendor Documents</h4>
</div>

<form [formGroup]="vendorDocumentForm">
    <!------------------------------------- Incorporation Certificate ---------------------- -->
    <div class="row doc-field">
        <div class="col-5 doc-form-field">
            <mat-label>{{vendorDocCtrl.incCerCtrl.placeholder}} * :
            </mat-label>
        </div>
        <div class="col-7 actions">
            <input style="display: none" [attr.id]="vendorDocCtrl.incCerCtrl.browserId" type="file" multiple
                accept=".xls,.xlsx,.doc,.docx,.pdf,.png,.jpg,.zip"
                (change)="onFileChange($event, vendorDocCtrl.incCerCtrl.documentTypeId)" />
            <button mat-raised-button class="footer-actions"
                (click)="onBrowseFileClick($event, vendorDocCtrl.incCerCtrl.browserId)">Attach</button>
            <div *ngIf="filesMap[vendorDocCtrl.incCerCtrl.documentTypeId]?.isAttached"
                style="display: flex;    flex-wrap: wrap;">
                <span class="filename"
                    *ngFor="let f of filesMap[vendorDocCtrl.incCerCtrl.documentTypeId]?.filesList; let fInd = index">
                    <span>
                        <mat-icon matTooltip="{{ f.actualFileName }}" (click)="downloadFile(f)">description</mat-icon>

                        <button mat-button mat-icon-button aria-label="Delete" *ngIf="!disableSubmit"
                            (click)="onDeleteFileClick(f, fInd, vendorDocCtrl.incCerCtrl.documentTypeId)">
                            <mat-icon>delete_outline</mat-icon>
                        </button>
                    </span>
                </span>
            </div>
            <div *ngIf="filesMap[vendorDocCtrl.incCerCtrl.documentTypeId] && 
            filesMap[vendorDocCtrl.incCerCtrl.documentTypeId]?.isError" class="errortxt">
                Please attach the Documents
            </div>
        </div>

    </div>
    <!------------------------------------- GST No---------------------- -->
    <div class="row doc-field">
        <div class="col-5 doc-form-field">
            <mat-form-field class="full-width">
                <input type="text" matInput placeholder="{{vendorDocCtrl.gstCtrl.placeholder}}" formControlName="gstNum"
                    maxlength="15" autocomplete="off"
                    (blur)="updateMandatory('gstNum',vendorDocCtrl.gstCtrl.documentTypeId)">
            </mat-form-field>
        </div>

        <div class="col-7 actions">
            <input style="display: none" [attr.id]="vendorDocCtrl.gstCtrl.browserId" type="file" multiple
                accept=".xls,.xlsx,.doc,.docx,.pdf,.png,.jpg,.zip"
                (change)="onFileChange($event, vendorDocCtrl.gstCtrl.documentTypeId)" />
            <button mat-raised-button class="footer-actions"
                (click)="onBrowseFileClick($event, vendorDocCtrl.gstCtrl.browserId)"
                [disabled]="!vendorDocumentForm.get('gstNum').value">Attach</button>

            <div *ngIf="filesMap[vendorDocCtrl.gstCtrl.documentTypeId]?.isAttached" style="display: flex;
    flex-wrap: wrap;">
                <span class="filename"
                    *ngFor="let f of filesMap[vendorDocCtrl.gstCtrl.documentTypeId]?.filesList; let fInd = index">
                    <span>
                        <mat-icon matTooltip="{{ f.actualFileName }}" (click)="downloadFile(f)">description</mat-icon>
                        <button mat-button mat-icon-button aria-label="Delete" *ngIf="!disableSubmit"
                            (click)="onDeleteFileClick(f, fInd, vendorDocCtrl.gstCtrl.documentTypeId)">
                            <mat-icon>delete_outline</mat-icon>
                        </button>

                    </span>
                </span>

            </div>
            <div *ngIf="filesMap[vendorDocCtrl.gstCtrl.documentTypeId] && 
            filesMap[vendorDocCtrl.gstCtrl.documentTypeId]?.isError" class="errortxt">
                Please attach the Documents
            </div>
        </div>

    </div>
    <!------------------------------------- Pan No---------------------- -->
    <div class="row doc-field">
        <div class="col-5 doc-form-field">
            <mat-form-field class="full-width">
                <input type="text" matInput placeholder="{{vendorDocCtrl.panCtrl.placeholder}}" formControlName="panNum"
                    maxlength="10" autocomplete="off" required>
            </mat-form-field>
            <mat-label></mat-label>
        </div>
        <div class="col-7 actions">
            <input style="display: none" [attr.id]="vendorDocCtrl.panCtrl.browserId" type="file" multiple
                accept=".xls,.xlsx,.doc,.docx,.pdf,.png,.jpg,.zip"
                (change)="onFileChange($event, vendorDocCtrl.panCtrl.documentTypeId)" />
            <button mat-raised-button class="footer-actions"
                (click)="onBrowseFileClick($event, vendorDocCtrl.panCtrl.browserId)">Attach</button>
            <div *ngIf="filesMap[vendorDocCtrl.panCtrl.documentTypeId]?.isAttached" style="display: flex;
    flex-wrap: wrap;">
                <span class="filename"
                    *ngFor="let f of filesMap[vendorDocCtrl.panCtrl.documentTypeId]?.filesList; let fInd = index">
                    <span>
                        <mat-icon matTooltip="{{ f.actualFileName }}" (click)="downloadFile(f)">description</mat-icon>
                        <button mat-button mat-icon-button aria-label="Delete" *ngIf="!disableSubmit"
                            (click)="onDeleteFileClick(f, fInd, vendorDocCtrl.panCtrl.documentTypeId)">
                            <mat-icon>delete_outline</mat-icon>
                        </button>
                    </span>
                </span>

            </div>
            <div *ngIf="filesMap[vendorDocCtrl.panCtrl.documentTypeId] && 
            filesMap[vendorDocCtrl.panCtrl.documentTypeId]?.isError" class="errortxt">
                Please attach the Documents
            </div>
        </div>

    </div>
    <!------------------------------------- Cancelled Chequed---------------------- -->
    <div class="row doc-field">
        <div class="col-5 doc-form-field">
            <mat-label> {{vendorDocCtrl.canChqCtrl.placeholder}} * :</mat-label>
        </div>
        <div class="col-7 actions">
            <input style="display: none" [attr.id]="vendorDocCtrl.canChqCtrl.browserId" type="file" multiple
                accept=".xls,.xlsx,.doc,.docx,.pdf,.png,.jpg,.zip"
                (change)="onFileChange($event, vendorDocCtrl.canChqCtrl.documentTypeId)" />
            <button mat-raised-button class="footer-actions"
                (click)="onBrowseFileClick($event, vendorDocCtrl.canChqCtrl.browserId)">Attach</button>
            <div *ngIf="filesMap[vendorDocCtrl.canChqCtrl.documentTypeId]?.isAttached" style="display: flex;
    flex-wrap: wrap;">
                <span class="filename"
                    *ngFor="let f of filesMap[vendorDocCtrl.canChqCtrl.documentTypeId]?.filesList; let fInd = index">
                    <span>
                        <mat-icon matTooltip="{{ f.actualFileName }}" (click)="downloadFile(f)">description</mat-icon>
                        <button mat-button mat-icon-button aria-label="Delete" *ngIf="!disableSubmit"
                            (click)="onDeleteFileClick(f, fInd, vendorDocCtrl.canChqCtrl.documentTypeId)">
                            <mat-icon>delete_outline</mat-icon>
                        </button>
                    </span>
                </span>

            </div>
            <div *ngIf="filesMap[vendorDocCtrl.canChqCtrl.documentTypeId] && 
            filesMap[vendorDocCtrl.canChqCtrl.documentTypeId]?.isError" class="errortxt">
                Please attach the Documents
            </div>
        </div>

    </div>
    <!------------------------------------- LUT No---------------------- -->
    <div class="row doc-field">
        <div class="col-5 doc-form-field">
            <mat-form-field>
                <input type="text" matInput placeholder="{{vendorDocCtrl.lutNoCtrl.placeholder}}"
                    formControlName="lutNum" autocomplete="off" required>
            </mat-form-field>
            <mat-form-field style="width:9em;">
                <mat-label>Pick LUT Date</mat-label>
                <input matInput [matDatepicker]="picker" disabled formControlName="lutDate" autocomplete="off">
                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                <mat-datepicker #picker disabled="false"></mat-datepicker>
            </mat-form-field>
        </div>
        <div class="col-7 actions">
            <input style="display: none" [attr.id]="vendorDocCtrl.lutNoCtrl.browserId" type="file" multiple
                accept=".xls,.xlsx,.doc,.docx,.pdf,.png,.jpg,.zip"
                (change)="onFileChange($event, vendorDocCtrl.lutNoCtrl.documentTypeId)" />
            <button mat-raised-button class="footer-actions"
                (click)="onBrowseFileClick($event, vendorDocCtrl.lutNoCtrl.browserId)">Attach</button>
            <div *ngIf="filesMap[vendorDocCtrl.lutNoCtrl.documentTypeId]?.isAttached" style="display: flex;
    flex-wrap: wrap;">
                <span class="filename"
                    *ngFor="let f of filesMap[vendorDocCtrl.lutNoCtrl.documentTypeId]?.filesList; let fInd = index">
                    <span>
                        <mat-icon matTooltip="{{ f.actualFileName }}" (click)="downloadFile(f)">description</mat-icon>
                        <button mat-button mat-icon-button aria-label="Delete" *ngIf="!disableSubmit"
                            (click)="onDeleteFileClick(f, fInd, vendorDocCtrl.lutNoCtrl.documentTypeId)">
                            <mat-icon>delete_outline</mat-icon>
                        </button>

                    </span>
                </span>

            </div>
            <div *ngIf="filesMap[vendorDocCtrl.lutNoCtrl.documentTypeId] && 
            filesMap[vendorDocCtrl.lutNoCtrl.documentTypeId]?.isError" class="errortxt">
                Please attach the Documents
            </div>
        </div>

    </div>
    <!------------------------------------- PF No---------------------- -->
    <div class="row doc-field">
        <div class="col-5 doc-form-field">
            <mat-form-field class="full-width">
                <input type="text" matInput placeholder="{{vendorDocCtrl.pfCtrl.placeholder}}" formControlName="pfNum"
                    autocomplete="off" (blur)="updateMandatory('pfNum',vendorDocCtrl.pfCtrl.documentTypeId)">
            </mat-form-field>

        </div>
        <div class="col-7 actions">
            <input style="display: none" [attr.id]="vendorDocCtrl.pfCtrl.browserId" type="file" multiple
                accept=".xls,.xlsx,.doc,.docx,.pdf,.png,.jpg,.zip"
                (change)="onFileChange($event, vendorDocCtrl.pfCtrl.documentTypeId)" />
            <button mat-raised-button class="footer-actions" [disabled]="!vendorDocumentForm.get('pfNum').value"
                (click)="onBrowseFileClick($event, vendorDocCtrl.pfCtrl.browserId)">Attach</button>
            <div *ngIf="filesMap[vendorDocCtrl.pfCtrl.documentTypeId]?.isAttached" style="display: flex;
    flex-wrap: wrap;">
                <span class="filename"
                    *ngFor="let f of filesMap[vendorDocCtrl.pfCtrl.documentTypeId]?.filesList; let fInd = index">
                    <span>
                        <mat-icon matTooltip="{{ f.actualFileName }}" (click)="downloadFile(f)">description</mat-icon>
                        <button mat-button mat-icon-button aria-label="Delete" *ngIf="!disableSubmit"
                            (click)="onDeleteFileClick(f, fInd, vendorDocCtrl.pfCtrl.documentTypeId)">
                            <mat-icon>delete_outline</mat-icon>
                        </button>
                    </span>
                </span>

            </div>
            <div *ngIf="filesMap[vendorDocCtrl.pfCtrl.documentTypeId] && 
            filesMap[vendorDocCtrl.pfCtrl.documentTypeId]?.isError" class="errortxt">
                Please attach the Documents
            </div>
        </div>

    </div>
    <!------------------------------------- ESI  No---------------------- -->
    <div class="row doc-field">
        <div class="col-5 doc-form-field">
            <mat-form-field class="full-width">
                <input type="text" matInput placeholder="{{vendorDocCtrl.esiCtrl.placeholder}}" formControlName="esiNum"
                    autocomplete="off" (blur)="updateMandatory('esiNum',vendorDocCtrl.esiCtrl.documentTypeId)">
            </mat-form-field>

        </div>
        <div class="col-7 actions">
            <input style="display: none" [attr.id]="vendorDocCtrl.esiCtrl.browserId" type="file" multiple
                accept=".xls,.xlsx,.doc,.docx,.pdf,.png,.jpg,.zip"
                (change)="onFileChange($event, vendorDocCtrl.esiCtrl.documentTypeId)" />
            <button mat-raised-button class="footer-actions" [disabled]="!vendorDocumentForm.get('esiNum').value"
                (click)="onBrowseFileClick($event, vendorDocCtrl.esiCtrl.browserId)">Attach</button>
            <div *ngIf="filesMap[vendorDocCtrl.esiCtrl.documentTypeId]?.isAttached" style="display: flex;
    flex-wrap: wrap;">
                <span class="filename"
                    *ngFor="let f of filesMap[vendorDocCtrl.esiCtrl.documentTypeId]?.filesList; let fInd = index">
                    <span>
                        <mat-icon matTooltip="{{ f.actualFileName }}" (click)="downloadFile(f)">description</mat-icon>
                        <button mat-button mat-icon-button aria-label="Delete" *ngIf="!disableSubmit"
                            (click)="onDeleteFileClick(f, fInd, vendorDocCtrl.esiCtrl.documentTypeId)">
                            <mat-icon>delete_outline</mat-icon>
                        </button>
                    </span>
                </span>
            </div>
            <div *ngIf="filesMap[vendorDocCtrl.esiCtrl.documentTypeId] && 
            filesMap[vendorDocCtrl.esiCtrl.documentTypeId]?.isError" class="errortxt">
                Please attach the Documents
            </div>
        </div>

    </div>
    <!------------------------------------- MSME  Registered?---------------------- -->
    <div class="row doc-field">
        <div class="col-3 doc-form-field">
            <mat-label>{{vendorDocCtrl.msmeCtrl.placeholder}}</mat-label>
        </div>
        <div class="col-2 doc-form-field">
            <mat-radio-group formControlName="isMsmedRegistered"
                (change)="updateMandatory('isMsmedRegistered',vendorDocCtrl.msmeCtrl.documentTypeId)">
                <mat-radio-button [value]=true>YES</mat-radio-button>
                <mat-radio-button [value]=false [checked]=true>NO</mat-radio-button>
            </mat-radio-group>
        </div>
        <div class="col-7 actions">
            <input style="display: none" [attr.id]="vendorDocCtrl.msmeCtrl.browserId" type="file" multiple
                accept=".xls,.xlsx,.doc,.docx,.pdf,.png,.jpg,.zip"
                (change)="onFileChange($event, vendorDocCtrl.msmeCtrl.documentTypeId)" />
            <button mat-raised-button class="footer-actions"
                [disabled]="!vendorDocumentForm.get('isMsmedRegistered').value"
                (click)="onBrowseFileClick($event, vendorDocCtrl.msmeCtrl.browserId)">Attach</button>
            <div *ngIf="filesMap[vendorDocCtrl.msmeCtrl.documentTypeId]?.isAttached" style="display: flex;
    flex-wrap: wrap;">
                <span class="filename"
                    *ngFor="let f of filesMap[vendorDocCtrl.msmeCtrl.documentTypeId]?.filesList; let fInd = index">
                    <span>
                        <mat-icon matTooltip="{{ f.actualFileName }}" (click)="downloadFile(f)">description</mat-icon>
                        <button mat-button mat-icon-button aria-label="Delete" *ngIf="!disableSubmit"
                            (click)="onDeleteFileClick(f, fInd, vendorDocCtrl.msmeCtrl.documentTypeId)">
                            <mat-icon>delete_outline</mat-icon>
                        </button>
                    </span>
                </span>
            </div>
            <div *ngIf="filesMap[vendorDocCtrl.msmeCtrl.documentTypeId] && 
            filesMap[vendorDocCtrl.msmeCtrl.documentTypeId]?.isError" class="errortxt">
                Please attach the Documents
            </div>
        </div>

    </div>
    <!------------------------------------- Has TDS---------------------- -->
    <div class="row doc-field">
        <div class="col-3 doc-form-field">
            <mat-label>{{vendorDocCtrl.tdsCtrl.placeholder}}</mat-label>
        </div>
        <div class="col-2 doc-form-field">
            <mat-radio-group formControlName="hasTdsLower"
                (change)="updateMandatory('hasTdsLower',vendorDocCtrl.tdsCtrl.documentTypeId)">
                <mat-radio-button [value]=true>YES</mat-radio-button>
                <mat-radio-button [value]=false [checked]=true>NO</mat-radio-button>
            </mat-radio-group>
        </div>
        <div class="col-7 actions">
            <input style="display: none" [attr.id]="vendorDocCtrl.tdsCtrl.browserId" type="file" multiple
                accept=".xls,.xlsx,.doc,.docx,.pdf,.png,.jpg,.zip"
                (change)="onFileChange($event, vendorDocCtrl.tdsCtrl.documentTypeId)" />
            <button mat-raised-button class="footer-actions" [disabled]="!vendorDocumentForm.get('hasTdsLower').value"
                (click)="onBrowseFileClick($event, vendorDocCtrl.tdsCtrl.browserId)">Attach</button>
            <div *ngIf="filesMap[vendorDocCtrl.tdsCtrl.documentTypeId]?.isAttached" style="display: flex;
    flex-wrap: wrap;">
                <span class="filename"
                    *ngFor="let f of filesMap[vendorDocCtrl.tdsCtrl.documentTypeId]?.filesList; let fInd = index">
                    <span>
                        <mat-icon matTooltip="{{ f.actualFileName }}" (click)="downloadFile(f)">description</mat-icon>
                        <button mat-button mat-icon-button aria-label="Delete" *ngIf="!disableSubmit"
                            (click)="onDeleteFileClick(f, fInd, vendorDocCtrl.tdsCtrl.documentTypeId)">
                            <mat-icon>delete_outline</mat-icon>
                        </button>
                    </span>
                </span>

            </div>
            <div *ngIf="filesMap[vendorDocCtrl.tdsCtrl.documentTypeId] && 
            filesMap[vendorDocCtrl.tdsCtrl.documentTypeId]?.isError" class="errortxt">
                Please attach the Documents
            </div>
        </div>

    </div>
    <!------------------------------------- isSEZ---------------------- -->
    <div class="row doc-field">
        <div class="col-3 doc-form-field">
            <mat-label>{{vendorDocCtrl.sezCtrl.placeholder}}</mat-label>
        </div>
        <div class="col-2 doc-form-field">
            <mat-radio-group formControlName="isSez"
                (change)="updateMandatory('isSez',vendorDocCtrl.sezCtrl.documentTypeId)">
                <mat-radio-button [value]=true>YES</mat-radio-button>
                <mat-radio-button [value]=false [checked]=true>NO</mat-radio-button>
            </mat-radio-group>
        </div>
        <div class="col-7 actions">
            <input style="display: none" [attr.id]="vendorDocCtrl.sezCtrl.browserId" type="file" multiple
                accept=".xls,.xlsx,.doc,.docx,.pdf,.png,.jpg,.zip"
                (change)="onFileChange($event, vendorDocCtrl.sezCtrl.documentTypeId)" />
            <button mat-raised-button class="footer-actions" [disabled]="!vendorDocumentForm.get('isSez').value"
                (click)="onBrowseFileClick($event, vendorDocCtrl.sezCtrl.browserId);">Attach</button>
            <div *ngIf="filesMap[vendorDocCtrl.sezCtrl.documentTypeId]?.isAttached" style="display: flex;
    flex-wrap: wrap;">
                <span class="filename"
                    *ngFor="let f of filesMap[vendorDocCtrl.sezCtrl.documentTypeId]?.filesList; let fInd = index">
                    <span>
                        <mat-icon matTooltip="{{ f.actualFileName }}" (click)="downloadFile(f)">description</mat-icon>
                        <button mat-button mat-icon-button aria-label="Delete" *ngIf="!disableSubmit"
                            (click)="onDeleteFileClick(f, fInd, vendorDocCtrl.sezCtrl.documentTypeId)">
                            <mat-icon>delete_outline</mat-icon>
                        </button>
                    </span>
                </span>

            </div>
            <div *ngIf="filesMap[vendorDocCtrl.sezCtrl.documentTypeId] && filesMap[vendorDocCtrl.sezCtrl.documentTypeId]?.isError"
                class="errortxt">
                Please attach the Documents
            </div>
        </div>

    </div>
    <!------------------------------------- RCM ---------------------- -->
    <div class="row doc-field">
        <div class="col-3 doc-form-field">
            <mat-label>Is RCM applicable?</mat-label>
        </div>
        <div class="col-2 doc-form-field">
            <mat-radio-group aria-label="Is RCM applicable?" formControlName="isRcmApplicable">
                <mat-radio-button [value]=true>YES</mat-radio-button>
                <mat-radio-button [value]=false [checked]=true>NO</mat-radio-button>
            </mat-radio-group>
        </div>
        <div class="col-7 doc-form-field"></div>
    </div>

    <!------------------------------------- CIN No---------------------- -->
    <div class="row doc-field">
        <div class="col-5 doc-form-field">
            <mat-form-field class="full-width">
                <input type="text" matInput placeholder="CIN No." formControlName="cinNum" autocomplete="off">
            </mat-form-field>
        </div>
    </div>
    <!------------------------------------- Others Document---------------------- -->

    <div class="row doc-field">
        <div class="col-5 doc-form-field">
            <mat-form-field class="full-width">
                <input type="text" matInput placeholder="{{vendorDocCtrl.otherCtrl.placeholder}}"
                    formControlName="otherDocDesc" autocomplete="off"
                    (blur)="updateMandatory('otherDocDesc',vendorDocCtrl.otherCtrl.documentTypeId)">
            </mat-form-field>

        </div>
        <div class="col-7 actions">
            <input style="display: none" [attr.id]="vendorDocCtrl.otherCtrl.browserId" type="file" multiple
                accept=".xls,.xlsx,.doc,.docx,.pdf,.png,.jpg,.zip"
                (change)="onFileChange($event, vendorDocCtrl.otherCtrl.documentTypeId)" />
            <button mat-raised-button class="footer-actions" [disabled]="!vendorDocumentForm.get('otherDocDesc').value"
                (click)="onBrowseFileClick($event, vendorDocCtrl.otherCtrl.browserId)">Attach</button>
            <div *ngIf="filesMap[vendorDocCtrl.otherCtrl.documentTypeId]?.isAttached" style="display: flex;
    flex-wrap: wrap;">
                <span class="filename"
                    *ngFor="let f of filesMap[vendorDocCtrl.otherCtrl.documentTypeId]?.filesList; let fInd = index">
                    <span>
                        <mat-icon matTooltip="{{ f.actualFileName }}" (click)="downloadFile(f)">description</mat-icon>
                        <button mat-button mat-icon-button aria-label="Delete" *ngIf="!disableSubmit"
                            (click)="onDeleteFileClick(f, fInd, vendorDocCtrl.otherCtrl.documentTypeId)">
                            <mat-icon>delete_outline</mat-icon>
                        </button>
                    </span>
                </span>
                <div *ngIf="filesMap[vendorDocCtrl.otherCtrl.documentTypeId] && 
                filesMap[vendorDocCtrl.otherCtrl.documentTypeId]?.isError" class="errortxt">
                    Please attach the Documents
                </div>
            </div>
        </div>
    </div>

</form>

<div class="row actions margin-unset" style="margin-top: 2em;">
    <div class="errortxt" *ngIf="vendorDocumentForm.invalid || isServerError">
        {{ failureMsg }}
    </div>

    <button mat-raised-button class="footer-actions" (click)="onPrevClick()"
        [disabled]="disableSubmit">Previous</button>
    <button mat-raised-button class="footer-actions footer-actions-green" [disabled]="disableSubmit"
        (click)="onSubmitClick()">Submit</button>
</div>