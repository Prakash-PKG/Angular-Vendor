<div class="main">
    <div class="title">
        <h3>Invoice Details</h3>
    </div>
    <!-- -----------------------------------stepper---------------------------------------------- -->
    <ul class="stepper">
        <li class="step completed">
            <span class="upper-text">{{ uploadLevel?.date }}</span>
            <span class="dot"></span>
            <span class="lower-text">
                Upload
            </span>
        </li>

        <li class="step"
            [ngClass]="(poLevel?.status == 'Approved' || poLevel?.status == 'Rejected') ? 'completed' : ''">
            <span class="upper-text">{{ getStatusDetails(poLevel) }}</span>
            <span class="dot"></span>
            <span class="lower-text">
                Buyer
            </span>
        </li>

        <li class="step"
            [ngClass]="(fhLevel?.status == 'Approved' || fhLevel?.status == 'Rejected') ? 'completed' : ''">
            <span class="upper-text">{{ getStatusDetails(fhLevel) }}</span>
            <span class="dot"></span>
            <span class="lower-text">
                Business Head
            </span>
        </li>

        <li class="step"
            [ngClass]="(financeLevel?.status == 'Approved' || financeLevel?.status == 'Rejected') ? 'completed' : ''">
            <span class="upper-text">{{ getStatusDetails(financeLevel) }}</span>
            <span class="dot"></span>
            <span class="lower-text">
                Finance
            </span>
        </li>

        <li class="step" [ngClass]="(getPaidStatus().length > 0) ? 'completed' : ''">
            <span class="upper-text">{{ getPaymentStatusDetails() }}</span>
            <span class="dot"></span>
            <span class="lower-text">
                Payment
            </span>
        </li>
    </ul>

    <div class="flex-container full-width details">
        <div class="description flex-item">
            <div class="flex-container">
                <div class="flex-item">
                    <div class="header ">
                        Vendor Id:
                    </div>
                    <div class="value ">
                        {{ (invoiceDetails?.vendorId) ? invoiceDetails?.vendorId : "" }}
                    </div>

                </div>
                <div class="flex-item">
                    <div class="header ">
                        Vendor Name:
                    </div>
                    <div class="value ">
                        {{ (invoiceDetails?.vendorName) ? invoiceDetails?.vendorName : "" }}
                    </div>

                </div>
                <div class="flex-item" *ngIf="isPOBasedInvoice == true">
                    <div class="header ">
                        PO No:
                    </div>
                    <div class="value ">
                        {{ invoiceDetails?.poNumber }}
                    </div>

                </div>
                <div class="flex-item">
                    <div class="header ">
                        Invoice No:
                    </div>
                    <div class="value ">
                        {{ invoiceDetails?.invoiceNumber }}
                    </div>

                </div>
                <div class="flex-item">
                    <div class="header ">
                        Invoice Date:
                    </div>
                    <div class="value ">
                        {{ getFormattedDate(invoiceDetails?.invoiceDate) }}
                    </div>

                </div>
                <div class="flex-item">
                    <div class="header ">
                        Total Inv Amt: <small> (inc tax) </small>
                    </div>
                    <div class="value ">
                        {{ invoiceDetails?.totalAmt + " " + currency }}
                    </div>


                </div>
                <div class="flex-item">
                    <div class="header ">
                        Remarks:
                    </div>
                    <div class="value ">
                        {{ invoiceDetails?.remarks }}
                    </div>

                </div>
                <div class="flex-item">
                    <div class="header ">
                        Amount Paid:
                    </div>
                    <div class="value ">
                        {{ getPaidAmount() }}
                    </div>

                </div>
                <div class="flex-item">
                    <div class="header ">
                        Paid Date:
                    </div>
                    <div class="value ">
                        {{ getPaidDate() }}
                    </div>

                </div>
                <div class="flex-item">
                    <div class="header ">
                        Paid Status:
                    </div>
                    <div class="value ">
                        {{ getPaidStatus() }}
                    </div>

                </div>
                <div class="flex-item">
                    <div class="header ">Invoice Attachments </div>
                    <div class="filename value" *ngFor="let ifile of invoiceFilesList; let ifileInd = index">
                        <mat-icon matTooltip="{{ifile.actualFileName}}" (click)="downloadFile(ifile)">description</mat-icon>
                        <!-- <button mat-button mat-icon-button aria-label="Download" (click)="downloadFile(ifile)">
                            <mat-icon>save_alt</mat-icon>
                        </button> -->
                    </div>
                </div>
                <div class="flex-item">
                    <div class="header ">Supporting Attachments</div>
                    <div class="filename value" *ngFor="let sf of supportFilesList; let sfInd = index">
                        <mat-icon matTooltip=" {{ sf.actualFileName }}" (click)="downloadFile(sf)">description</mat-icon>
                        <!-- <button mat-button mat-icon-button aria-label="Download" (click)="downloadFile(sf)">
                            <mat-icon>save_alt</mat-icon>
                        </button> -->
                    </div>
                </div>
            </div>
        </div>

        <div class="flex-item">
            <mat-card class="card mat-elevation-z3 full-width">
                <table class="dataTable full-width">
                    <thead>
                        <tr>
                            <th class="headers" scope="col" *ngFor="let hdr of statusHeaderArr; let shInd = index">
                                <span>{{ hdr }}</span>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let apprlevel of approvalLevelList; let levelInd = index">
                            <td>
                                <span>{{ apprlevel.levelName }}</span>
                            </td>
                            <td>
                                <span>{{ apprlevel.status }}</span>
                            </td>
                            <td>
                                <span>{{ apprlevel.date }}</span>
                            </td>
                            <td>
                                <span>{{ apprlevel.remarks }}</span>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </mat-card>
        </div>
    </div>


    <!-- table details [dataSource]="POData" -->
    <div class="container my-container margin-unset full-width">
        <table class="dataTable full-width">
            <thead>
                <tr>
                    <th class="headers" scope="col" *ngFor="let hdr of headerArr; let hInd = index">
                        <span>{{ hdr }} </span>
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let item of itemsList; let itemInd = index">
                    <td>
                        <span>{{ item.itemNumber }}</span>
                    </td>
                    <td>
                        <span>{{ item.itemDescription }}</span>
                    </td>
                    <td *ngIf="isPOBasedInvoice == true">
                        <span>{{ item.uom }}</span>
                    </td>
                    <td>
                        <span>{{ item.hsn }}</span>
                    </td>
                    <td *ngIf="isPOBasedInvoice == true">
                        <span>{{ item.orderedUnits }}</span>
                    </td>
                    <td *ngIf="isPOBasedInvoice == true">
                        <span>{{ item.suppliedUnits }}</span>
                    </td>
                    <td *ngIf="isPOBasedInvoice == true">
                        <span>{{ item.consumedUnits }}</span>
                    </td>
                    <td>
                        <span>{{ item.invoiceUnits }}</span>
                    </td>
                    <td>
                        <span>{{ currency }}</span>
                    </td>
                    <td class="amount">
                        <span>{{ item.unitPrice }}</span>
                    </td>
                    <td class="amount">
                        <span>{{ item.unitsTotalAmount }}</span>
                    </td>
                </tr>
            </tbody>
        </table>
        <div class="footer">
            <div class="header ">
                Total Amount:
            </div>
            <div class="value ">
                {{ totalAmount + " " + currency }}
            </div>
        </div>

        <div class="row actions margin-unset">
            <button mat-raised-button class="footer-actions">Back</button>
        </div>
    </div>
</div>